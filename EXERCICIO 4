import requests

def consultar_cotacao(moeda: str):
    """
    Consulta a cotação de uma moeda estrangeira em relação ao Real (BRL) usando a AwesomeAPI.

    Parâmetros:
    moeda (str): Código da moeda (ex: USD, EUR, GBP).

    Retorna:
    dict: Cotação atual, máxima, mínima e data/hora da última atualização.
    """
    moeda = moeda.upper()
    url = f"https://economia.awesomeapi.com.br/json/last/{moeda}-BRL"

    try:
        resposta = requests.get(url)
        resposta.raise_for_status()
        dados = resposta.json()

        chave = f"{moeda}BRL"
        if chave not in dados:
            return {"erro": "Moeda não encontrada ou código inválido."}

        info = dados[chave]
        return {
            "atual": float(info["bid"]),
            "maxima": float(info["high"]),
            "minima": float(info["low"]),
            "data_hora": info["create_date"]
        }
    except requests.RequestException as e:
        return {"erro": f"Erro ao consultar a cotação: {e}"}


# Interação com o usuário
moeda_usuario = input("Digite o código da moeda (ex: USD, EUR, GBP): ")
resultado = consultar_cotacao(moeda_usuario)

if "erro" in resultado:
    print(resultado["erro"])
else:
    print(f"\nCotação {moeda_usuario.upper()} -> BRL:")
    print(f" Valor atual: R$ {resultado['atual']:.2f}")
    print(f" Máximo: R$ {resultado['maxima']:.2f}")
    print(f" Mínimo: R$ {resultado['minima']:.2f}")
    print(f" Última atualização: {resultado['data_hora']}")
